# HexaGrid Auth — Environment Variables
# ========================================
# Source this file before starting the API:
#   source ~/hexagrid/.env.auth
# Or add to your hexagrid.sh / systemd unit.

# ── REQUIRED ─────────────────────────────────────────────────────────────────
# Generate with: python3 -c "import secrets; print(secrets.token_hex(32))"
export HEXAGRID_JWT_SECRET=c5ddee69ed331b7556379203b18ab2ce42e9f2b08187bda07a04887eaf771396

# Initial superadmin account (created on first startup, skip if users already exist)
export HEXAGRID_ADMIN_EMAIL=admin@hexagrid.local
export HEXAGRID_ADMIN_PASSWORD=nvidiah100

# ── OPTIONAL ─────────────────────────────────────────────────────────────────
# CORS: add your actual dashboard origin(s)
export HEXAGRID_CORS_ORIGINS='["http://localhost:8000","https://hexagrid.yourcompany.com"]'

# Auth DB location (separate from telemetry.db)
export HEXAGRID_AUTH_DB=/var/lib/hexagrid/auth.db

# Access token lifetime (default 15 min)
export HEXAGRID_ACCESS_TTL_MIN=15

# ── OIDC: Okta ───────────────────────────────────────────────────────────────
# export HEXAGRID_OIDC_OKTA_CLIENT_ID=0oa...
# export HEXAGRID_OIDC_OKTA_CLIENT_SECRET=...
# export HEXAGRID_OIDC_OKTA_DISCOVERY_URL=https://dev-xxxxx.okta.com/.well-known/openid-configuration
# export HEXAGRID_OIDC_OKTA_ROLE_CLAIM=groups
# export HEXAGRID_OIDC_OKTA_ROLE_MAP='{"hexagrid-admins":"superadmin","hexagrid-ops":"operator","hexagrid-finance":"finance"}'

# ── OIDC: Azure AD / Microsoft Entra ID ──────────────────────────────────────
# export HEXAGRID_OIDC_AZURE_CLIENT_ID=...
# export HEXAGRID_OIDC_AZURE_CLIENT_SECRET=...
# export HEXAGRID_OIDC_AZURE_DISCOVERY_URL=https://login.microsoftonline.com/{YOUR_TENANT_ID}/v2.0/.well-known/openid-configuration
# export HEXAGRID_OIDC_AZURE_ROLE_CLAIM=roles
# export HEXAGRID_OIDC_AZURE_ROLE_MAP='{"HexaGrid.Admin":"superadmin","HexaGrid.Operator":"operator"}'

# ── OIDC: Google Workspace ───────────────────────────────────────────────────
# export HEXAGRID_OIDC_GOOGLE_CLIENT_ID=...
# export HEXAGRID_OIDC_GOOGLE_CLIENT_SECRET=...
# export HEXAGRID_OIDC_GOOGLE_DISCOVERY_URL=https://accounts.google.com/.well-known/openid-configuration
# export HEXAGRID_OIDC_GOOGLE_ROLE_MAP='{"admin@yourcompany.com":"superadmin"}'

# ── SAML 2.0 (generic enterprise IdP) ────────────────────────────────────────
# export HEXAGRID_SAML_SP_ENTITY_ID=https://hexagrid.yourcompany.com
# export HEXAGRID_SAML_SP_ACS_URL=https://hexagrid.yourcompany.com/api/v1/auth/saml/callback
# export HEXAGRID_SAML_IDP_METADATA_URL=https://your-idp.com/saml/metadata
# export HEXAGRID_SAML_ROLE_ATTRIBUTE=groups
# export HEXAGRID_SAML_ROLE_MAP='{"DataCenter-Admins":"superadmin","DC-Operators":"operator"}'
